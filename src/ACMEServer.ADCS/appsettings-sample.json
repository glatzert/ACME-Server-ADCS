{
  // This file is for reference only.
  // Copy the settings you need to `appsettings.Production.json`.

  // [Optional] 
  // see appsettings.json for default settings
  // https://docs.microsoft.com/en-us/aspnet/core/fundamentals/logging/#configure-logging
  "Logging": {
    "EnableHttpLogging": false, // allows you to log http requests with asp.net core (handle with care)
  },

  // https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel#host-filtering
  "AllowedHosts": "*",

  // [Optional] If you use a load balancer, that has another public dns name than your application server, you might need to activate forwarded headers.
  // We're using AspNetCore's ForwardedHeaders Middleware to support this: https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-8.0#forwarded-headers-middleware-options
  "ForwardedHeaders": {
    "KnownNetworks": [],
    "KnownProxies": [ "127.0.0.1" ]
  },


  // If you run the software in a windows service, you'll need to configure Kestrel (the AspNetCore WebServer) directly.
  // see https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel#endpoint-configuration for further informations.
  "Kestrel": {
    /// ...
  },

  // [Optional] Generic settings for the ACME-Server.
  "AcmeServer": {
    "HostedWorkers": {
      "ValidationCheckInterval": 60, // In Seconds. Challenge validation will check for work after this period.
      "IssuanceCheckInterval": 60 // In Seconds. Certificate Issuance will check for work after this period.
    },

    // [Required] Configure the CAA identities for your ACME server.
    // If you skip this, CAA records cannot be checked by the server and you're not compliant with CA Browser Forum
    "CAAIdentities": [],

    // [Optional] This url is included in the metadata - it's for humans to read.
    "WebsiteUrl": "https://my-custom.site",

    // [Optional] Terms of Service (TOS) - this is included in the ACME-Metadata.
    "TOS": {

      // [Optional] For internal use most likely 'false'
      "RequireAgreement": false,

      // [Optional] The TOS-URL is included in the ACME-Metadata and error messages.
      "Url": "https://my-custom.tos", // Included in ACME-Metadata

      // [Optional] TOS-Agreement is time-based and must be repeated, if TOS changes.
      "LastUpdate": "2020-01-23"
    },


    // [Optional] Add this, if the ACME-Server supports external account binding (EAB)
    // Additional services will be configured to support the scenario.
    "ExternalAccountBinding": {

      // [Required] If false, EAB is optional for account creation.
      "Required": true,

      // [Required] Url to retrieve the MAC-key for given {kid} (see README about this)
      "MACRetrievalUrl": "https://myEABService.example.com/mac/{kid}",

      // [Optional] Url to signal successful EAB check
      "SuccessSignalUrl": "https://myEABService.example.com/success/{kid}",

      // [Optional] Url to signal failed EAB check
      "FailedSignalUrl": "https://myEABService.example.com/failed/{kid}",

      // [Optional] Http-Headers to be sent to the MAC related URLs
      "Headers": [
        {
          "Key": "Authorization",
          "Value": "ApiKey TrustmeBro"
        }
      ]
    }
  },

  // [Required] The ACME-FileStore configuration - this is used to store the ACME-Server data.
  "AcmeFileStore": {
    "BasePath": "C:\\ACME-ADCS\\" // Make sure the path exists and is writeable from the ACME server process identity.
  },

  // [Required] Issuance profile configuration - there's no default profile, you must define at least one.
  // You'll find some simple samples below.
  "Profiles": {

    // The profile name is used to identify the profile in the ACME-Server.
    // You may choose any arbitrary name, that contains only alphanumeric characters, dashes and underscores.
    "Default-Profile": {

      // [Required] List of supported identifiers for this profile.
      // Possible values are: dns, ip, permanent-identifier, hardware-module
      "SupportedIdentifiers": [ "dns", "ip", "permanent-identifier", "hardware-module" ],

      // [Required] The following settings are used to issue the certificate.
      "ADCSOptions": {
        // [Required] The CA-Server to use for certificate issuance.
        "CAServer": "CA.FQDN.com\\CA Name",

        // [Required] The template to use for certificate issuance.
        "TemplateName": "DNS-ACME-Template"
      },

      // [Optional] The validity period of the authorization challenge. The default is one day.
      // After this period, the authorization will be invalid and a new challenge must be requested.
      "AuthorizationValidityPeriod": "23:59:59",

      // [Optional] If true, external account binding is required to use this profile. The default is false.
      "RequireExternalAccountBinding": false,

      // [Optional] The following settings are used to validate the identifiers.
      // Validation will run during profile selection and thus can be used to restrict the identifiers that can be used with this profile.
      "IdentifierValidation": {

        // [Optional] Configure DNS identifier validation
        "DNS": {

          // [Optional] AllowedDNSNames is used to restrict the DNS names. It's an endsWith case-insensitive match.
          // 'example.com' will allow *.example.com and example.com, '.example.com' will allow *.example.com but not example.com
          // The default is an empty string - so no restriction (everything ends with an empty string).
          "AllowedDNSNames": [ "" ]
        },

        // [Optional] Configure IP identifier validation
        "IP": {

          // [Optional] AllowedIPAddresses is used to restrict the IP addresses. Use CIDR notation, e.g. ::1/128 or 127.0.0.1/32
          // The default is ::0/0 and 0.0.0.0/0 - so no restriction.
          "AllowedIPNetworks": [ "::0/0", "0.0.0.0/0" ]
        },

        // [Optional] Configure permanent-identifier validation
        "PermanentIdentifier": {

          // [Optional] ValidationRegex is used to restrict the permanent identifiers.
          // The default is .* - so no restriction.
          "ValidationRegex": ".*"
        }
      },

      // [Optional] The following settings are used configure challenge validation
      "ChallengeValidation": {

        // [Optional] Configuration for device-attest-01 challenges.
        "DeviceAttest01": {

          // [Recommended] Enables remote validation of device-attest-01 challenges (see README about this).
          // This feature is experimental and may change in the future.
          "RemoteValidationUrl": null,

          // [Optional] Configuration for apple type device-attest-01 challenges.
          "Apple": {

            // [Optional] The root certificate for apple device-attest-01 challenges.
            // The default is the apple enterprise root attestation certificate from https://www.apple.com/certificateauthority/private/
            "RootCertificates": [
              "MIICJDCCAamgAwIBAgIUQsDCuyxyfFxeq/bxpm8frF15hzcwCgYIKoZIzj0EAwMwUTEtMCsGA1UEAwwkQXBwbGUgRW50ZXJwcmlzZSBBdHRlc3RhdGlvbiBSb290IENBMRMwEQYDVQQKDApBcHBsZSBJbmMuMQswCQYDVQQGEwJVUzAeFw0yMjAyMTYxOTAxMjRaFw00NzAyMjAwMDAwMDBaMFExLTArBgNVBAMMJEFwcGxlIEVudGVycHJpc2UgQXR0ZXN0YXRpb24gUm9vdCBDQTETMBEGA1UECgwKQXBwbGUgSW5jLjELMAkGA1UEBhMCVVMwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAT6Jigq+Ps9Q4CoT8t8q+UnOe2poT9nRaUfGhBTbgvqSGXPjVkbYlIWYO+1zPk2Sz9hQ5ozzmLrPmTBgEWRcHjA2/y77GEicps9wn2tj+G89l3INNDKETdxSPPIZpPj8VmjQjBAMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFPNqTQGd8muBpV5du+UIbVbi+d66MA4GA1UdDwEB/wQEAwIBBjAKBggqhkjOPQQDAwNpADBmAjEA1xpWmTLSpr1VH4f8Ypk8f3jMUKYz4QPG8mL58m9sX/b2+eXpTv2pH4RZgJjucnbcAjEA4ZSB6S45FlPuS/u4pTnzoz632rA+xW/TZwFEh9bhKjJ+5VQ9/Do1os0u3LEkgN/r"
            ]
          }
        }
      },

      // [Optional] The following settings are used to configure the validations of the certificate signing request.
      "CSRValidation": {

        // [Optional] Configure additional rules for SAN during CSR validation.
        // This is used to allow SANs, that would normally be rejected by the ACME protocol,
        // e.g. because there's no matching identifier in the order.
        // You might break the assumptions made by the ACME protocol, so use this with care!
        "SANValidationParameters": {

          // [Optional] If set, the ACME-ADCS server will call this URL to validate the SANs.
          // Refer to the README for more information about this.
          "RemoteValidationUrl": null,

          // [Optional] Additional rules for DnsName SANs
          "DnsName": {

            // [Optional] DNS names will be considered valid, if they match the following regular expression.
            // Be aware of JSON escaping, e.g. "\\.example\\.com$" for a regex that matches all subdomains of example.com.
            "ValidationRegex": null
          },

          // [Optional] Additional rules for IPAddress SANs
          "IPAddress": {

            // [Optional] IP addresses will be considered valid, if the are part of the following networks.
            // Use CIDR notation, e.g. ::1/128 or 127.0.0.1/32
            "ValidNetworks": []
          },

          // [Optional] Additional rules for URI SANs
          "URI": {

            // [Optional] URIs will be considered valid, if they match the following regular expression.
            // Be aware of JSON escaping, e.g. "\\.example\\.com$" for a regex that matches all subdomains of example.com.
            "ValidationRegex": null
          },

          // [Optional] Additional rules for Rfc822Name SANs
          "Rfc822Name": {

            // [Optional] URIs will be considered valid, if they match the following regular expression.
            // Be aware of JSON escaping, e.g. "\\.example\\.com$" for a regex that matches all subdomains of example.com.
            "ValidationRegex": null
          },

          // [Optional] Additional rules for RegisteredId SANs
          "RegisteredId": {

            // [Optional] URIs will be considered valid, if they match the following regular expression.
            // Be aware of JSON escaping, e.g. "\\.example\\.com$" for a regex that matches all subdomains of example.com.
            "ValidationRegex": null
          },

          // [Optional] Additional rules for OtherName SANs
          // Some otherName SAN types are parsed and have special handling, e.g. permanent-identifier and hardware-module.
          "OtherName": {

            // [Optional] If set, the ACME-ADCS server will use this to validate id-on-permanentIdentifier [RFC4043].
            "PermanentIdentifier": {

              // [Optional] Permanent identifiers will be considered valid, if they match the following regular expression."
              "ValidValueRegex": null,

              // [Optional] If set, the assigner will be validated against this regex."
              "ValidAssignerRegex": null
            },

            // [Optional] If set, the ACME-ADCS server will use this to validate id-on-hardwareModuleName [RFC4108].
            // Since serial numbers are byte arrays, the ACME-ADCS server will consider all serial numbers as valid.
            "HardwareModuleName": {

              // [Optional] Hardware module names will be considered valid, if they match the following regular expression.
              "ValidTypeRegex": null
            },

            // [Optional] If set, the ACME-ADCS server will use this to validate id-on-userPrincipalName [RFC8226].
            "PrincipalName": {

              // [Optional] Principal names will be considered valid, if they match the following regular expression.
              "ValidationRegex": null
            },

            // [Optional] OtherName types that are not explicitly handled by the ACME-ADCS server will be considered valid, if their type is in this list.
            // The value of the type cannot be validated explicitly.
            // If you want to specifically handle types that are not listed here, you can use the "RemoteValidationUrl" in the CSR validation parameters to do it yourself.
            "IgnoredTypes": []
          }
        }
      }
    },


    // Here are some simple sample profiles to get you started:
    // A sample for DNS identifiers,
    "Default-DNS": {
      "SupportedIdentifiers": [ "dns" ],
      "ADCSOptions": {
        "CAServer": "CA.FQDN.com\\CA Name",
        "TemplateName": "DNS-ACME-Template"
      }
    },

    // A sample for IP identifiers,
    "Default-IP": {
      "SupportedIdentifiers": [ "ip" ],
      "ADCSOptions": {
        "CAServer": "CA.FQDN.com\\CA Name",
        "TemplateName": "IP-ACME-Template"
      }
    },

    // A sample for permanent-identifiers, refer to the challenge validation section above for more details about Root certificates and similar.
    // Permanent identifiers are used for Device certificates and are currently experimental, since the device-attest-01 challenge is currently a draft.
    "Default-Device": {
      "SupportedIdentifiers": [ "permanent-identifier" ],
      "ADCSOptions": {
        "CAServer": "CA.FQDN.com\\CA Name",
        "TemplateName": "Device-ACME-Template"
      }
    }
  }
}
